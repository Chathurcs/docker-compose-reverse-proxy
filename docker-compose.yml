services:
  web:
    image: nginx:latest
    container_name: nginx-web
    restart: unless-stopped
    ports:
      - "80:80"
    volumes:
      - /home/ec2-user/site/index.html:/usr/share/nginx/html/index.html:ro
      - /home/ec2-user/compose-demo/nginx/default.conf:/etc/nginx/conf.d/default.conf:ro
    depends_on:
      whoami:
        condition: service_started
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost/ >/dev/null 2>&1 || exit 1"]
      interval: 10s
      timeout: 3s
      retries: 3

  whoami:
    image: traefik/whoami:latest
    container_name: whoami
    restart: unless-stopped




      